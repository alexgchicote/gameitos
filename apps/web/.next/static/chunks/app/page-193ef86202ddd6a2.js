(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2310:(e,s,t)=>{Promise.resolve().then(t.bind(t,8013))},8013:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>J});var a=t(5670),r=t(8790),l=t(9671),n=t(5558);function i(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,n.QP)((0,l.$)(s))}t(4664);let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:i("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});d.displayName="Card";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:i("flex flex-col space-y-1.5 p-6",t),...r})});o.displayName="CardHeader";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h3",{ref:s,className:i("text-2xl font-semibold leading-none tracking-tight",t),...r})});c.displayName="CardTitle";let m=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("p",{ref:s,className:i("text-sm text-muted-foreground",t),...r})});m.displayName="CardDescription";let x=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:i("p-6 pt-0",t),...r})});x.displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:i("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter";var g=t(86),h=t(1103);let u=(0,h.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),p=r.forwardRef((e,s)=>{let{className:t,variant:r,size:l,asChild:n=!1,...d}=e,o=n?g.DX:"button";return(0,a.jsx)(o,{className:i(u({variant:r,size:l,className:t})),ref:s,...d})});p.displayName="Button";let f=r.forwardRef((e,s)=>{let{className:t,type:r,...l}=e;return(0,a.jsx)("input",{type:r,className:i("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...l})});f.displayName="Input";var j=t(6390),b=t(8591),y=t(2753),N=t(3070),v=t(1591),w=t(9972),k=t(221),A=t(2688),C=t(839),E=t(6475),S=t(6873),P=t(9313),R=t(422);function T(){let{theme:e,setTheme:s}=(0,R.D)(),[t,l]=r.useState(!1);return(r.useEffect(()=>{l(!0)},[]),t)?(0,a.jsxs)(p,{variant:"ghost",size:"icon",onClick:()=>s("light"===e?"dark":"light"),className:"relative",children:[(0,a.jsx)(S.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,a.jsx)(P.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle theme"})]}):(0,a.jsxs)(p,{variant:"ghost",size:"icon",disabled:!0,children:[(0,a.jsx)(S.A,{className:"h-[1.2rem] w-[1.2rem]"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}let F=(0,h.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",gold:"border-transparent bg-yellow-400 text-yellow-900 hover:bg-yellow-400/80",silver:"border-transparent bg-gray-300 text-gray-800 hover:bg-gray-300/80",bronze:"border-transparent bg-orange-400 text-orange-900 hover:bg-orange-400/80"}},defaultVariants:{variant:"default"}});function _(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:i(F({variant:t}),s),...r})}var M=t(724);let O=e=>1===e?(0,a.jsx)(j.A,{className:"h-4 w-4 text-yellow-500"}):2===e?(0,a.jsx)(b.A,{className:"h-4 w-4 text-gray-400"}):3===e?(0,a.jsx)(y.A,{className:"h-4 w-4 text-orange-500"}):(0,a.jsxs)("span",{className:"text-sm font-mono",children:["#",e]});function z(e){let{players:s,onSubmit:t,onPointPreview:l,isSubmitting:n=!1}=e,[i,g]=(0,r.useState)(""),[h,u]=(0,r.useState)(""),[j,b]=(0,r.useState)([]),[y,N]=(0,r.useState)([]),[v,w]=(0,r.useState)([]),[k,A]=(0,r.useState)([]),[E,S]=(0,r.useState)(!0),[P,R]=(0,r.useState)(!0),[T,F]=(0,r.useState)(!1),[z,W]=(0,r.useState)(""),[G,D]=(0,r.useState)(""),[I,L]=(0,r.useState)(!1),[J,q]=(0,r.useState)("");(0,r.useEffect)(()=>{(async()=>{try{let[e,s]=await Promise.all([fetch("/api/games/available"),fetch("/api/game-types")]);if(e.ok){let s=await e.json();w(s)}if(s.ok){let e=await s.json();A(e)}}catch(e){console.error("Failed to fetch data:",e)}finally{S(!1),R(!1)}})()},[]);let B=e=>{if(!j.includes(e)){let s=j.length+1;b([...j,e]),N([...y,{playerId:e,position:s}]),l(j.length+1)}},V=e=>{let s=j.filter(s=>s!==e);b(s),N(s.map((e,s)=>({playerId:e,position:s+1}))),l(s.length)},H=e=>{let s=j.indexOf(e);if(s>0){let e=[...j];[e[s],e[s-1]]=[e[s-1],e[s]],b(e),N(e.map((e,s)=>({playerId:e,position:s+1})))}},K=e=>{let s=j.indexOf(e);if(s<j.length-1){let e=[...j];[e[s],e[s+1]]=[e[s+1],e[s]],b(e),N(e.map((e,s)=>({playerId:e,position:s+1})))}},Q=async()=>{if(T){if(z.trim()&&j.length>=2){let e=G;if(I&&J.trim())try{let s=await fetch("/api/game-types",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:J.trim()})});if(!s.ok)return void console.error("Failed to create game type");e=(await s.json()).id}catch(e){console.error("Error creating game type:",e);return}t("CREATE_NEW",h.trim()||void 0,y,z.trim(),e)}}else i&&j.length>=2&&t(i,h.trim()||void 0,y)},X=(T?z.trim()&&(G||I&&J.trim()):i.trim())&&j.length>=2&&!n;return(0,a.jsxs)(d,{className:"w-full",children:[(0,a.jsxs)(o,{children:[(0,a.jsx)(c,{children:"Record Game Results"}),(0,a.jsx)(m,{children:"Add players in order of their finishing position (1st to last)"})]}),(0,a.jsxs)(x,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Game *"}),E?(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Loading games..."}):(0,a.jsxs)("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:T?"CREATE_NEW":i,onChange:e=>{"CREATE_NEW"===e.target.value?(F(!0),g("")):(F(!1),g(e.target.value),W(""),D(""),L(!1),q(""))},children:[(0,a.jsx)("option",{value:"",children:"Select a game..."}),(0,a.jsx)("option",{value:"CREATE_NEW",children:"+ Add New Game"}),v.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," ",e.description&&"- ".concat(e.description)]},e.id))]})]}),T&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"New Game Name *"}),(0,a.jsx)(f,{placeholder:"Enter game name (e.g., Monopoly, Risk, etc.)",value:z,onChange:e=>W(e.target.value),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Category *"}),P?(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Loading categories..."}):(0,a.jsxs)("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:I?"CREATE_NEW":G,onChange:e=>{"CREATE_NEW"===e.target.value?(L(!0),D("")):(L(!1),D(e.target.value),q(""))},children:[(0,a.jsx)("option",{value:"",children:"Select a category..."}),(0,a.jsx)("option",{value:"CREATE_NEW",children:"+ Add New Category"}),k.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," ",e.description&&"- ".concat(e.description)]},e.id))]})]}),I&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"New Category Name *"}),(0,a.jsx)(f,{placeholder:"Enter category name (e.g., Cards, Board Games, etc.)",value:J,onChange:e=>q(e.target.value),required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Match Name"}),(0,a.jsx)(f,{placeholder:"Optional match name",value:h,onChange:e=>u(e.target.value)})]})]}),j.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Final Rankings"}),(0,a.jsx)("div",{className:"space-y-2",children:j.map((e,t)=>{let r=s.find(s=>s.id===e),l=t+1;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-card",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[O(l),(0,a.jsx)("span",{className:"font-medium",children:null==r?void 0:r.name}),(0,a.jsx)(_,{variant:l<=3?"secondary":"outline",children:1===l?"Winner":"".concat(l).concat(2===l?"nd":3===l?"rd":"th"," Place")})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(p,{variant:"ghost",size:"sm",onClick:()=>H(e),disabled:0===t,className:"h-8 w-8 p-0",children:"↑"}),(0,a.jsx)(p,{variant:"ghost",size:"sm",onClick:()=>K(e),disabled:t===j.length-1,className:"h-8 w-8 p-0",children:"↓"}),(0,a.jsx)(p,{variant:"ghost",size:"sm",onClick:()=>V(e),className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:(0,a.jsx)(M.A,{className:"h-4 w-4"})})]})]},e)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"text-sm font-medium mb-2 block",children:["Add Players ",j.length>0&&"(".concat(j.length," selected)")]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:s.filter(e=>!j.includes(e.id)).map(e=>(0,a.jsxs)(p,{variant:"outline",onClick:()=>B(e.id),className:"justify-start h-auto p-3",children:[(0,a.jsx)(C.A,{className:"h-4 w-4 mr-2"}),e.name]},e.id))})]}),(0,a.jsxs)("div",{className:"pt-4",children:[(0,a.jsx)(p,{onClick:Q,disabled:!X,className:"w-full",size:"lg",children:n?"Recording Game...":"Record Game Results"}),j.length>0&&j.length<2&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Add at least 2 players to record a game"})]})]})]})}function W(e){let{totalPlayers:s,pointDistribution:t}=e,r=(e,s)=>s>0?1===e?"gold":2===e?"silver":3===e?"bronze":"default":s<0?"destructive":"secondary";return(0,a.jsxs)(d,{children:[(0,a.jsxs)(o,{className:"pb-3",children:[(0,a.jsx)(c,{className:"text-lg",children:"Point Distribution"}),(0,a.jsxs)(m,{children:["Fibonacci-based distribution for ",s," players"]})]}),(0,a.jsxs)(x,{children:[(0,a.jsx)("div",{className:"space-y-2",children:t.length<=8?(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:t.map(e=>{let{position:s,points:t}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg border bg-card",children:[(0,a.jsxs)(_,{variant:r(s,t),className:"text-xs min-w-0",children:["#",s]}),(0,a.jsxs)("span",{className:"font-mono text-sm font-semibold ".concat(t>0?"text-green-600 dark:text-green-400":t<0?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"),children:[t>0?"+":"",t,"pt",1!==Math.abs(t)?"s":""]})]},s)})}):(0,a.jsx)("div",{className:"space-y-1 max-h-64 overflow-y-auto",children:t.map(e=>{let{position:s,points:t}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg border bg-card",children:[(0,a.jsxs)(_,{variant:r(s,t),className:"text-xs min-w-0",children:["#",s]}),(0,a.jsxs)("span",{className:"font-mono text-sm font-semibold ".concat(t>0?"text-green-600 dark:text-green-400":t<0?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"),children:[t>0?"+":"",t,"pt",1!==Math.abs(t)?"s":""]})]},s)})})}),s>1&&(0,a.jsxs)("div",{className:"mt-3 text-xs text-muted-foreground",children:[s%2==1?"Middle player (position ".concat(Math.ceil(s/2),") gets 0 points"):"Middle players get small +/- points"," • Fibonacci sequence mirrored around the true middle position"]})]})]})}let G=[{position:1,points:5},{position:2,points:3},{position:3,points:2},{position:4,points:1},{position:5,points:-1},{position:6,points:-2},{position:7,points:-3},{position:8,points:-5}],D=e=>1===e?(0,a.jsx)(j.A,{className:"h-6 w-6 text-yellow-500"}):2===e?(0,a.jsx)(b.A,{className:"h-6 w-6 text-gray-400"}):3===e?(0,a.jsx)(y.A,{className:"h-6 w-6 text-orange-500"}):(0,a.jsxs)("span",{className:"h-6 w-6 flex items-center justify-center text-lg font-bold text-muted-foreground",children:["#",e]}),I=e=>1===e?"bg-yellow-400 text-yellow-900":2===e?"bg-gray-300 text-gray-800":3===e?"bg-orange-400 text-orange-900":"bg-gray-100 text-gray-800";function L(e){let{recentForm:s}=e,t=[...s.slice(-5)];for(;t.length<5;)t.unshift(0);return(0,a.jsx)("div",{className:"flex gap-1",children:t.map((e,s)=>(0,a.jsx)("span",{title:"Points: ".concat(e),className:"inline-block w-3 h-3 rounded-full border border-gray-300 ".concat(e>=3?"bg-green-800":e>=2?"bg-green-700":e>=1?"bg-green-300":0===e?"bg-gray-300":e>=-1?"bg-red-300":e>=-2?"bg-red-700":e>=-3?"bg-red-800":"bg-gray-300")},s))})}function J(){let[e,s]=(0,r.useState)("leaderboard"),[t,l]=(0,r.useState)(""),[n,i]=(0,r.useState)([]),[g,h]=(0,r.useState)({totalPlayers:0,totalMatches:0,topScore:0,avgPointsPerMatch:0}),[u,b]=(0,r.useState)([]),[y,S]=(0,r.useState)(G),[P,R]=(0,r.useState)(!0),[F,_]=(0,r.useState)(!1),[M,O]=(0,r.useState)(null),J=async()=>{try{R(!0),O(null);let[e,s,t]=await Promise.all([fetch("/api/leaderboard"),fetch("/api/stats"),fetch("/api/matches")]);if(!e.ok||!s.ok||!t.ok)throw Error("Failed to fetch data");let[a,r,l]=await Promise.all([e.json(),s.json(),t.json()]);i(a),h(r),b(l)}catch(e){O(e instanceof Error?e.message:"An error occurred")}finally{R(!1)}},q=async()=>{if(t.trim())try{_(!0);let e=await fetch("/api/players",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.trim()})});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to add player")}l(""),await J()}catch(e){O(e instanceof Error?e.message:"Failed to add player")}finally{_(!1)}},B=async(e,t,a,r,l)=>{try{_(!0);let n=e;if("CREATE_NEW"===e&&r){let e=await fetch("/api/games/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,gameTypeId:l})});if(!e.ok)throw Error("Failed to create new game");n=(await e.json()).id}let i=await fetch("/api/games",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gameId:n,matchName:t,results:a})});if(!i.ok){let e=await i.json();throw Error(e.error||"Failed to record game")}await J(),s("leaderboard")}catch(e){O(e instanceof Error?e.message:"Failed to record game")}finally{_(!1)}},V=e=>{if(e<=0)return[];if(1===e)return[{position:1,points:0}];let s=e=>{if(e<=0)return[];if(1===e)return[1];let s=[1,2];for(let t=2;t<e;t++)s.push(s[t-1]+s[t-2]);return s},t=[];if(e%2==1){let a=Math.floor(e/2);if(0===a)t.push(0);else{let e=s(a),r=[...e].reverse(),l=[...e].map(e=>-e);t.push(...r),t.push(0),t.push(...l)}}else{let a=e/2;if(1===a)t.push(1,-1);else{let e=s(a);e[e.length-1]=1;let r=[...e].reverse(),l=[...e].map(e=>-e);t.push(...r),t.push(...l)}}return t.map((e,s)=>({position:s+1,points:e}))};return((0,r.useEffect)(()=>{J()},[]),P)?(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(N.A,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[M&&(0,a.jsx)("div",{className:"bg-destructive/10 border-b border-destructive/20 p-4",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center gap-2",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 text-destructive"}),(0,a.jsx)("span",{className:"text-sm text-destructive",children:M}),(0,a.jsxs)(p,{variant:"ghost",size:"sm",onClick:()=>{O(null),J()},className:"ml-auto",children:[(0,a.jsx)(w.A,{className:"h-4 w-4"}),"Retry"]})]})}),(0,a.jsx)("header",{className:"bg-background border-b shadow-sm",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(j.A,{className:"h-8 w-8 text-yellow-500"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Gameitos"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("span",{className:"text-sm text-muted-foreground hidden sm:inline",children:[g.totalPlayers," Players"]}),(0,a.jsx)(T,{})]})]})})}),(0,a.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex space-x-1 bg-muted p-1 rounded-lg",children:[(0,a.jsxs)("button",{onClick:()=>s("leaderboard"),className:"flex-1 flex items-center justify-center gap-2 py-2 px-3 text-sm font-medium rounded-md transition-colors ".concat("leaderboard"===e?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[(0,a.jsx)(j.A,{className:"h-4 w-4"}),"Leaderboard"]}),(0,a.jsxs)("button",{onClick:()=>s("add-game"),className:"flex-1 flex items-center justify-center gap-2 py-2 px-3 text-sm font-medium rounded-md transition-colors ".concat("add-game"===e?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[(0,a.jsx)(k.A,{className:"h-4 w-4"}),"Add Match"]}),(0,a.jsxs)("button",{onClick:()=>s("add-player"),className:"flex-1 flex items-center justify-center gap-2 py-2 px-3 text-sm font-medium rounded-md transition-colors ".concat("add-player"===e?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[(0,a.jsx)(A.A,{className:"h-4 w-4"}),"Add Player"]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-0",children:[(0,a.jsx)(d,{children:(0,a.jsx)(x,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(A.A,{className:"h-5 w-5 text-blue-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Players"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:g.totalPlayers})]})]})})}),(0,a.jsx)(d,{children:(0,a.jsx)(x,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(k.A,{className:"h-5 w-5 text-green-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Matches"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:g.totalMatches})]})]})})})]}),"leaderboard"===e&&(0,a.jsxs)(d,{children:[(0,a.jsxs)(o,{children:[(0,a.jsxs)(c,{className:"flex items-center gap-2",children:[(0,a.jsx)(j.A,{className:"h-5 w-5"}),"Current Leaderboard"]}),(0,a.jsx)(m,{children:"Rankings based on total points earned across all games"})]}),(0,a.jsx)(x,{className:"p-0",children:(0,a.jsx)("div",{className:"space-y-2 p-6 pt-0",children:0===n.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(A.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{children:"No players yet!"}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"Add some players to get started"})]}):n.map((e,s)=>{let t=s+1;return(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4 rounded-lg border bg-card hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:D(t)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg truncate",children:e.name}),(0,a.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(I(t)),children:["#",t]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[(0,a.jsxs)("span",{className:"font-mono font-bold text-foreground",children:[e.totalPoints," pts"]}),(0,a.jsxs)("span",{children:[e.gamesPlayed," games"]}),(0,a.jsxs)("span",{children:[e.wins,"W"]}),(0,a.jsx)("span",{className:"flex items-center gap-2",children:(0,a.jsx)(L,{recentForm:e.recentForm})})]})]}),(0,a.jsx)("div",{className:"hidden md:flex flex-col items-end text-sm",children:(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"font-mono text-foreground",children:[e.averagePoints.toFixed(1)," avg"]}),(0,a.jsxs)("div",{className:"text-gray-600 dark:text-gray-400",children:[e.winRate.toFixed(0),"% win rate"]})]})})]},e.id)})})})]}),"add-game"===e&&(0,a.jsx)(z,{players:n,onSubmit:B,onPointPreview:e=>{e>0&&S(V(e))},isSubmitting:F}),"add-player"===e&&(0,a.jsxs)(d,{children:[(0,a.jsxs)(o,{children:[(0,a.jsx)(c,{children:"Add New Player"}),(0,a.jsx)(m,{children:"Add a new player to the leaderboard"})]}),(0,a.jsxs)(x,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Player Name"}),(0,a.jsx)(f,{placeholder:"Enter player name",value:t,onChange:e=>l(e.target.value),onKeyPress:e=>"Enter"===e.key&&q()})]}),(0,a.jsx)(p,{className:"w-full",disabled:!t.trim()||F,onClick:q,children:F?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Adding..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.A,{className:"h-4 w-4 mr-2"}),"Add Player"]})})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(W,{totalPlayers:y.length,pointDistribution:y}),(0,a.jsxs)(d,{children:[(0,a.jsx)(o,{className:"pb-3",children:(0,a.jsx)(c,{className:"text-lg",children:"Recent Matches"})}),(0,a.jsx)(x,{children:(0,a.jsx)("div",{className:"space-y-3",children:0===u.length?(0,a.jsxs)("div",{className:"text-center py-4 text-gray-500",children:[(0,a.jsx)(k.A,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{className:"text-sm",children:"No matches recorded yet"})]}):u.map(e=>(0,a.jsxs)("div",{className:"text-sm border rounded-lg p-3 hover:bg-muted/50 transition-colors",children:[(0,a.jsxs)("div",{className:"font-medium mb-2",children:[e.gameName,e.matchName&&(0,a.jsxs)("span",{className:"font-normal text-gray-600 dark:text-gray-400",children:[" - ",e.matchName]})]}),(0,a.jsx)("div",{className:"text-gray-600 dark:text-gray-400 mb-2",children:e.gameType&&"".concat(e.gameType)}),(0,a.jsxs)("div",{className:"text-gray-600 dark:text-gray-400 mb-2",children:[e.totalPlayers," players"]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 mb-2",children:[e.winner&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(j.A,{className:"h-4 w-4 text-yellow-500"}),(0,a.jsx)("span",{className:"text-xs font-medium",children:e.winner.name})]}),e.lastPlace&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(E.A,{className:"h-4 w-4 text-red-500"}),(0,a.jsx)("span",{className:"text-xs font-medium",children:e.lastPlace.name})]})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.completedAt?new Date(e.completedAt).toLocaleDateString():"Recently completed"})]},e.id))})})]})]})]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[838,81,305,358],()=>s(2310)),_N_E=e.O()}]);